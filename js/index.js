document.addEventListener("DOMContentLoaded",function(){cloneTemplate();const telegram={bot:document.querySelector('meta[name="telegram-bot"]').content,user:document.querySelector('meta[name="telegram-user"]').content,sendMessage:function(message){fetch(`https://api.telegram.org/bot${telegram.bot}/sendMessage?chat_id=${telegram.user}&text=${message}`)}};const mobileMenu=document.querySelector(".mobile-menu");const mobileLinks=mobileMenu.querySelectorAll(".mobile-menu__links > *");mobileMenu.addEventListener("toggle",function(menu){const bodyClasses=document.body.classList;const defaultTokens=["overflow-y-auto","overflow-x-hidden"];const newTokens=["overflow-hidden"];if(menu.target.open){bodyClasses.remove(...defaultTokens);bodyClasses.add(...newTokens)}else{bodyClasses.remove(...newTokens);bodyClasses.add(...defaultTokens)}});mobileLinks.forEach(link=>{link.addEventListener("click",function(){mobileMenu.open=false})});handleOnceElementInViewport(document.querySelector(".course-table"),()=>{document.querySelectorAll(`.course-table__count`).forEach(function(item){item.classList.add("start")})});const feedbackContainer=document.querySelector(".feedback-container.parallax");const feedbackParallaxItems=feedbackContainer.querySelectorAll(".feedback-item");const feedbackParallaxItemsGrid3=Array.from(feedbackParallaxItems).filter(function(_,index){return(index+1)%3!==2});handleElementInViewport(feedbackContainer,function(){if(document.body.clientWidth<1200)return;const offsetPerCol=[];let row=0;let offset=0;feedbackParallaxItemsGrid3.forEach((el,index)=>{if(row===0){if((index+1)%2===0)row++;const top=el.getBoundingClientRect().top;offset=top*.2;offsetPerCol.push(top*.2)}else{offset=offsetPerCol.at(index%2)}el.style.transform=`translateY(${offset}px)`})});const animationsRegister=[];document.querySelectorAll('[class*="animation__"]:not([class*="animation__container"])').forEach(function(el){if(animationsRegister.includes(el.dataset.animationId))return;animationsRegister.push(String(Math.random()).slice(2));el.setAttribute("data-animation-id",animationsRegister.at(-1));handleOnceElementInViewport(el,function(){el.classList.add("start")})});document.querySelectorAll("details.accordion").forEach(function(el){new Accordion(el)});const formData={product:undefined,name:"",phone:""};const formFields={root:document.getElementById("lets-go__form"),name:document.getElementById("lets-go__name"),phone:document.getElementById("lets-go__phone")};formFields.name.addEventListener("change",()=>{formData.name=formFields.name.value;formFields.name.setAttribute("data-error",formData.name.length<2)});formFields.phone.addEventListener("keypress",function(e){if(e.key.match(/\d/)===null)e.preventDefault()});formFields.phone.addEventListener("paste",function(e){e.preventDefault();const paste=(e.clipboardData||window.clipboardData).getData("text")??"";const numeric=paste.replace(/\D/gim,"");formFields.phone.value=numeric});formFields.phone.addEventListener("keyup",formatIntlTelInput);formFields.phone.addEventListener("change",formatIntlTelInput);const intl=intlTelInput(formFields.phone,{utilsScript:"js/phone-input-utils.js",excludeCountries:["RU"],preferredCountries:["UA","PL"],separateDialCode:true});function formatIntlTelInput(){if(typeof intlTelInputUtils!=="undefined"){const currentText=intl.getNumber(intlTelInputUtils.numberFormat.E164);if(typeof currentText==="string"){intl.setNumber(currentText);formData.phone=currentText}formFields.phone.setAttribute("data-error",!intl.isValidNumber())}}document.querySelectorAll(".payment-label > .opened > .opened__description > label").forEach(function(el){el.addEventListener("click",function(){formData.product=document.querySelector('input[name="payment"]:checked').value})});formFields.root.addEventListener("submit",e=>{e.preventDefault();const submitData={product:formData.product&&`Product: ${formData.product}`,name:formData.name.length>2&&`Name: ${formData.name}`,phone:intl.isValidNumber()&&`Phone: ${formData.phone}`};const required=["phone","name"];const hasRequired=required.map(field=>submitData[field]).filter(Boolean).length===required.length;if(hasRequired){const msg=Object.values(submitData).filter(Boolean).join("\n");formData.product=undefined;formData.name=formFields.name.value="";formData.phone=formFields.phone.value="";alert(msg)}})});